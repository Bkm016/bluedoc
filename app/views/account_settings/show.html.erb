<% title_tag "Account Settings" %>
<div class="aside-wrap">
  <%= render "/users/sidebar" %>
</div>
<div class="main-wrap">
  <div class="main-content">
    <h1 class="title"><%= t(".Public Profile") %><h1>
    <h2 class="sub-title"><%= t(".Avatar") %></h2>
    <%= form_for(@user, url: account_settings_path, html: { method: :put }) do |f| %>
      <input type="hidden" name="_by" value="profile" />
      <div class="avatar-wrap">
        <div class="image-box">
          <%= user_avatar_tag(current_user, style: :custom, link: false) %>
        </div>
        <div class="form-group flex-auto">
          <p class="description text-gray" style="font-size: 12px;">
            <%= t(".This photo will be used to identify you in BOOK LAB") %>.
            <%= t(".It will be visible to anyone") %>.
            <br>
            <%= t(".Some tips: Use a photo or image rather than text and upload an image that is 132px square or larger") %>
          </p>
          <label class="btn-upload">
            <%= icon_tag("photo") %> 
            <%= t(".Upload new picture") %>
            <%= f.file_field :avatar, class: "js-manual-file-chooser", style: "display: none" %>
          </label>
        </div>
      </div>
      <script type="text/javascript">
        $("form").on("change", ".js-manual-file-chooser", (e) => {
          $form = $(e.delegateTarget);
          $form.submit();
        });
      </script>
    <% end %>
    
    <h2 class="sub-title"><%= t(".Profile") %></h2>
    <%= form_for(@user, url: account_settings_path, html: { method: :put }) do |f| %>
      <%= render "/shared/error_messages", target: @user %>

      <input type="hidden" name="_by" value="profile" />

      <div class="form-group">
        <%= f.label :name, class: "control-label" %>
        <%= f.text_field :name, class: "form-control"%>
      </div>

      <div class="form-group">
        <%= f.label :description, class: "control-label" %>
        <%= f.text_area :description, class: "form-control"%>
      </div>

      <div class="form-group">
        <%= f.label :location, class: "control-label" %>
        <%= f.text_field :location, class: "form-control" %>
      </div>

      <div class="form-group">
        <%= f.label :url, class: "control-label" %>
        <%= f.url_field :url, class: "form-control" %>
      </div>

      <div class="form-group">
        <%= f.label :locale, class: "control-label" %>
        <%= f.select :locale, Setting.locale_options,
          { include_blank: t(".System default", locale_name: Setting.default_locale_name) },
          { class: "form-control" } %>
      </div>

      <div class="form-group">
        <%= f.submit t(".Update profile"), class: "btn btn-primary btn-submit" %>
      </div>
    <% end %>
  </div>
</div>
